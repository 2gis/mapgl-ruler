!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=4)}([function(t,e,n){var o=n(1),i=n(2);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var r={insert:"head",singleton:!1};o(i,r);t.exports=i.locals||{}},function(t,e,n){"use strict";var o,i=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function s(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},o=[],i=0;i<t.length;i++){var r=t[i],l=e.base?r[0]+e.base:r[0],u=n[l]||0,d="".concat(l," ").concat(u);n[l]=u+1;var c=s(d),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==c?(a[c].references++,a[c].updater(p)):a.push({identifier:d,updater:g(p,e),references:1}),o.push(d)}return o}function u(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var a=r(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var d,c=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function p(t,e,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function h(t,e,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var f=null,v=0;function g(t,e){var n,o,i;if(e.singleton){var r=v++;n=f||(f=u(e)),o=p.bind(null,n,r,!1),i=p.bind(null,n,r,!0)}else n=u(e),o=h.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<n.length;o++){var i=s(n[o]);a[i].references--}for(var r=l(t,e),u=0;u<n.length;u++){var d=s(n[u]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}n=r}}}},function(t,e,n){(e=n(3)(!1)).push([t.i,".src-control-index-module__root {\n    background: #fff;\n    box-shadow: 0 1px 3px 0 rgba(38, 38, 38, 0.5);\n    border-radius: 4px;\n    width: 32px;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n}\n\n.src-control-index-module__button {\n    padding: 0;\n    outline: 0;\n    border: none;\n    cursor: pointer;\n\n    width: 32px;\n    height: 32px;\n    color: #262626;\n    box-sizing: border-box;\n\n    font-size: 18px;\n    font-weight: 400;\n\n    background: #fff;\n}\n\n.src-control-index-module__button:hover {\n    opacity: 0.7;\n}\n\n.src-control-index-module__button:active {\n    color: #028eff;\n}\n\n.src-control-index-module__enabled {\n    color: #028eff;\n}\n",""]),e.locals={root:"src-control-index-module__root",button:"src-control-index-module__button",enabled:"src-control-index-module__enabled"},t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=(a=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),r=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([i]).join("\n")}var a,s,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);o&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e,n){"use strict";n.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.create;function r(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}Object.create;var a=function(){function t(){this.events={}}return t.prototype.on=function(t,e){var n=this.events[t];return n||(n=this.events[t]=[]),n.push(e),this},t.prototype.once=function(t,e){var n=this,o=function(i){n.off(t,o),e.call(n,i)};return this.on(t,o),this},t.prototype.off=function(t,e){var n=this.events[t];if(!n)return this;var o=n.indexOf(e);return-1!==o&&n.splice(o,1),this},t.prototype.emit=function(t,e){var n=this.events[t];if(!n)return this;for(var o=n.slice(),i=0;i<o.length;i++)o[i].call(this,e);return this},t}(),s={start:{en:"Start",ru:"Старт"},addPoint:{en:"Add point",ru:"Добавить точку"},meter:{en:"m",ru:"м"},kilometer:{en:"km",ru:"км"}},l={popupLabelPhase:2147483647,jointLabelPhase:2147483646,areaLabelPhase:2147483645,linePhase:2147483644,jointPhase:2147483643,areaPhase:2147483642,areaColor:"#8899bb77",areaStrokeWidth:0,jointWidth:7,jointBorderWidth:3,jointBorder2Width:2,jointSmallWidth:0,jointSmallBorderWidth:4,jointSmallBorder2Width:2,jointColor:"#ffffff",jointBorderColor:"#667799",jointBorder2Color:"#ffffff",lineWidth:4,lineBorderWidth:2,lineBorder2Width:1,lineColor:"#667799",lineBorderColor:"#ffffff",lineBorder2Color:"#00000026",previewLineColor:"#66779966",labelFontSize:13,labelColor:"#556688",labelHaloColor:"#fff"};function u(t,e,n){if(void 0===t)return"";if(n=n.toLowerCase(),e)return s.start[n]||s.start.en;if(t<1e3)return"".concat(t," ").concat(s.meter[n]||s.meter.en);var o=(t/1e3).toFixed(1);return"".concat(o," ").concat(s.kilometer[n]||s.kilometer.en)}function d(t,e){var n=Math.PI/180,o=t[1]*n,i=e[1]*n,r=Math.sin((e[1]-t[1])*n/2),a=Math.sin((e[0]-t[0])*n/2),s=r*r+Math.cos(o)*Math.cos(i)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return Math.round(6371e3*l)}function c(t,e,n){return new mapgl.Polyline(t,{coordinates:e,zIndex:l.linePhase,zIndex2:l.linePhase-1e-5,zIndex3:l.linePhase-2e-5,width:l.lineWidth,width2:n?0:l.lineWidth+2*l.lineBorderWidth,width3:n?0:l.lineWidth+2*(l.lineBorderWidth+l.lineBorder2Width),color:n?l.previewLineColor:l.lineColor,color2:l.lineBorderColor,color3:l.lineBorder2Color,interactive:!n})}function p(t,e,n){var o;return new mapgl.HtmlMarker(t,{coordinates:e,html:'<div style="\n                user-select: none;\n                position: absolute;\n                width: '.concat(n.big?l.jointWidth:l.jointSmallWidth,"px;\n                height: ").concat(n.big?l.jointWidth:l.jointSmallWidth,"px;\n                top: ").concat(n.big?"-6px":"-4px",";\n                left: ").concat(n.big?"-6px":"-4px",";\n                background: ").concat(l.jointColor,";\n                border-radius: 50%;\n                border-style: solid;\n                border-color: ").concat(l.jointBorderColor,";\n                border-width: ").concat(n.big?l.jointBorderWidth:l.jointSmallBorderWidth,"px;\n                box-shadow: 0 0 0 ").concat(n.big?l.jointBorder2Width:l.jointSmallBorder2Width,"px ").concat(l.jointBorder2Color,';\n                cursor: pointer;\n            "></div'),zIndex:l.jointPhase,interactive:null!==(o=n.interactive)&&void 0!==o&&o})}function h(t,e,n){var o=t[0]-e[0],i=t[1]-e[1],r=n[0]-e[0],a=n[1]-e[1],s=r*r+a*a,l=0!==s?(o*r+i*a)/s:0;return l<0?e:l>1?n:[e[0]+l*r,e[1]+l*a]}function f(t,e,n){for(var o,i=e.map((function(e){return t.project(e.getCoordinates())})),r=1/0,a=i[0],s=0,l=0;l<i.length;l++){var u=h(n,i[l],null!==(o=i[l+1])&&void 0!==o?o:i[0]),c=u[0]-n[0],p=u[1]-n[1],f=c*c+p*p;f<r&&(r=f,a=u,s=l)}var v=t.unproject(a);return{point:v,distance:e[s].getDistance()+d(v,e[s].getCoordinates()),segment:s}}var v=0,g=function(t){function e(e,n,o,i,r,a){var s=t.call(this)||this;return s.map=e,s.showLabel=a,s.dragging=!1,s.hovered=!1,s.onClickPopup=function(){s.disable(),s.emit("removed",{targetData:s})},s.onMouseOver=function(){s.hovered||(s.hovered=!0,void 0===s.hoverTimer&&s.emit("mouseover",{targetData:s}))},s.onMouseOut=function(){s.hovered&&(s.hovered=!1,s.hoverTimer=setTimeout((function(){s.hovered||(s.emit("mouseout",{targetData:s}),s.hoverTimer=void 0)}),100))},s.onMouseMove=function(t){var e;s.dragging&&(s.emit("move",{targetData:s}),s.coordinates=s.map.unproject([t.clientX,t.clientY]),null===(e=s.marker)||void 0===e||e.setCoordinates(s.coordinates))},s.onMouseUp=function(){s.dragging&&(s.dragging=!1,s.emit("dragend"))},s.id=++v,s.distance=i,s.coordinates=n,s.isFirst=o,s.popup=function(t,e){var n=l.labelFontSize,o=l.jointWidth+l.jointBorderWidth+l.jointBorder2Width;return new mapgl.HtmlMarker(t,{coordinates:e,html:"",anchor:[-o/2,n/2],zIndex:l.popupLabelPhase,interactive:!0})}(s.map,s.coordinates),r&&s.enable(),s}return i(e,t),e.prototype.destroy=function(){this.disable(),this.popup.destroy()},e.prototype.disable=function(){var t,e;this.disablePopup(),null===(t=this.marker)||void 0===t||t.destroy(),this.marker=void 0,null===(e=this.label)||void 0===e||e.destroy(),this.label=void 0,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)},e.prototype.enable=function(){this.marker=p(this.map,this.getCoordinates(),{big:this.isFirst,interactive:!0}),this.addMarkerEventListeners(),this.updateLabel(),document.addEventListener("mousemove",this.onMouseMove)},e.prototype.getCoordinates=function(){return this.coordinates},e.prototype.getDistance=function(){return this.distance},e.prototype.isFirstJoint=function(){return this.isFirst},e.prototype.setDistance=function(t,e){this.distance=t,this.isFirst=e,this.hovered?this.enablePopup():this.disablePopup()},e.prototype.setAsFirstJoint=function(){var t;this.isFirst||(this.isFirst=!0,null===(t=this.marker)||void 0===t||t.destroy(),document.removeEventListener("mouseup",this.onMouseUp),this.marker=p(this.map,this.coordinates,{big:this.isFirst,interactive:!0}),this.addMarkerEventListeners(),this.setDistance(0,!0))},e.prototype.enablePopup=function(){var t;null===(t=this.label)||void 0===t||t.destroy(),this.popup.setCoordinates(this.coordinates),this.popup.setContent('\n        <img style="\n            user-select: none;\n            width: 24px;\n            height: 24px;\n            margin-top: -4px;\n            cursor: pointer;\n        " src="data:image/svg+xml;base64,'.concat("PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjxkZWZzPjxwYXRoIGlkPSJBIiBkPSJNMTIgMTAuNTg2bDMuNzkzLTMuNzkzIDEuNDE0IDEuNDE0TDEzLjQxNCAxMmwzLjc5MyAzLjc5My0xLjQxNCAxLjQxNEwxMiAxMy40MTRsLTMuNzkzIDMuNzkzLTEuNDE0LTEuNDE0TDEwLjU4NiAxMiA2Ljc5MyA4LjIwN2wxLjQxNC0xLjQxNEwxMiAxMC41ODZ6Ii8+PC9kZWZzPjxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEgLTEpIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMC41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIuMTUiLz48bWFzayBpZD0iQiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjQSIvPjwvbWFzaz48dXNlIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgeGxpbms6aHJlZj0iI0EiLz48ZyBmaWxsPSIjMjYyNjI2IiBtYXNrPSJ1cmwoI0IpIj48cGF0aCBkPSJNMCAwaDI0djI0SDB6Ii8+PC9nPjwvZz48L3N2Zz4=",'" alt="close">\n    ')),this.addPopupEventListeners()},e.prototype.disablePopup=function(){this.popup.setContent(""),this.updateLabel()},e.prototype.setLabelVisibility=function(t){this.showLabel=t,this.updateLabel()},e.prototype.updateLabel=function(){var t,e,n,o,i;null===(t=this.label)||void 0===t||t.destroy(),this.showLabel&&(this.label=(e=this.map,n=this.coordinates,o=this.distance,i=this.isFirst,new mapgl.Label(e,{coordinates:n,text:m(o,i,e.getLanguage()),fontSize:l.labelFontSize,zIndex:l.jointLabelPhase,color:l.labelColor,haloColor:l.labelHaloColor,haloRadius:1,relativeAnchor:[0,.5],offset:[l.jointWidth+l.jointBorderWidth+l.jointBorder2Width,0]})))},e.prototype.addMarkerEventListeners=function(){var t=this;if(this.marker){var e=this.marker.getContent();e.addEventListener("mousedown",(function(){t.disablePopup(),t.dragging=!0,t.emit("dragstart",{targetData:t})})),document.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver),e.addEventListener("mouseout",this.onMouseOut)}},e.prototype.addPopupEventListeners=function(){var t=this.popup.getContent();t.addEventListener("mouseover",this.onMouseOver),t.addEventListener("mouseout",this.onMouseOut),t.addEventListener("click",this.onClickPopup)},e}(a);function m(t,e,n){return u(t,e,n)}var b=function(){function t(t,e){this.map=t,this.showLabel=e,this.point=[0,0],this.distance=0}return t.prototype.update=function(t){void 0!==t?(this.point=t.point,this.distance=t.distance,this.marker?this.marker.setCoordinates(this.point):this.marker=p(this.map,this.point,{big:!0,interactive:!1}),this.updateLabel()):this.destroy()},t.prototype.destroy=function(){var t,e;null===(t=this.label)||void 0===t||t.destroy(),null===(e=this.marker)||void 0===e||e.destroy(),this.label=void 0,this.marker=void 0,this.point=[0,0],this.distance=0},t.prototype.setLabelVisibility=function(t){this.showLabel=t,this.updateLabel()},t.prototype.updateLabel=function(){var t,e,n,o,i,r,a;null===(t=this.label)||void 0===t||t.destroy(),this.showLabel&&(this.label=(e=this.map,n=this.point,o=this.distance,i=function(t){var e=t.distanceText,n=t.addJointText;return'\n        <div style="font-size: '.concat(l.labelFontSize,'px;\n            color: #667799;\n            user-select: none;\n            font-family: SuisseIntl, Helvetica, Arial, sans-serif;\n            text-shadow: 1px 0px 1px #fff, -1px 0px 1px #fff, 0px 1px 1px #fff, 0px -1px 1px #fff;\n            white-space: nowrap;\n            cursor: pointer;\n        ">\n            <div style="text-shadow: 1px 0px 1px #fff, -1px 0px 1px #fff, 0px 1px 1px #fff, 0px -1px 1px #fff;\n                user-select: none;\n                color: #667799;\n                font-family: SuisseIntl, Helvetica, Arial, sans-serif;\n                font-size: 13px;\n                margin: -6px 0 0 12px; /** отступы от точки наведения */\n                white-space: nowrap;\n                cursor: pointer;\n            ">\n                ').concat(e,"\n                <br>\n                ").concat(n,"\n            </div>\n        </div>\n    ")}(function(t,e){var n=t.getLanguage().toLowerCase(),o=u(e,!1,n),i=s.addPoint[n]||s.addPoint.en;return{distanceText:o,addJointText:i}}(e,o)),r=l.labelFontSize,a=l.jointWidth+l.jointBorderWidth+l.jointBorder2Width,new mapgl.HtmlMarker(e,{coordinates:n,html:i,anchor:[-a/2,r/2],zIndex:l.jointLabelPhase,interactive:!1})))},t}();var y=function(t){return t*Math.PI/180};function w(t){var e=t.reduce((function(t,e){return{sumX:t.sumX+e[0],sumY:t.sumY+e[1],count:t.count+1}}),{sumX:0,sumY:0,count:0});return[e.sumX/e.count,e.sumY/e.count]}var x=function(){function t(t,e,n){if(this.map=t,this.showLabel=n,this.area=0,this.perimeter=0,this.centroid=[0,0],e.length>2){var o=e.map((function(t){return t.getCoordinates()}));this.polygon=L(this.map,o),this.centroid=w(o),this.updateLabel()}}return t.prototype.update=function(t){var e,n;if(null===(e=this.polygon)||void 0===e||e.destroy(),t.length<=2)return this.perimeter=0,this.area=0,void(null===(n=this.label)||void 0===n||n.destroy());var o=t.map((function(t){return t.getCoordinates()}));this.centroid=w(o),this.perimeter=t[t.length-1].getDistance()+d(o[o.length-1],o[0]),this.area=function(t){if(t.length<=2)return 0;var e,n,o,i=0;return t.forEach((function(r,a){e=r,n=t[(a+1)%t.length],o=t[(a+2)%t.length],i+=Math.sin(y(n[1]))*(y(o[0])-y(e[0]))})),i=Math.abs(6371008.8*i*6371008.8)/2}(o),this.polygon=L(this.map,o),this.updateLabel()},t.prototype.destroy=function(){var t,e;null===(t=this.label)||void 0===t||t.destroy(),null===(e=this.polygon)||void 0===e||e.destroy()},t.prototype.getArea=function(){return this.area},t.prototype.getPerimeter=function(){return this.perimeter},t.prototype.setLabelVisibility=function(t){this.showLabel=t,this.updateLabel()},t.prototype.updateLabel=function(){var t,e,n,o;null===(t=this.label)||void 0===t||t.destroy(),this.showLabel&&(this.label=(e=this.map,n=this.centroid,o=this.area,new mapgl.Label(e,{coordinates:n,text:C(o,e.getLanguage()),zIndex:l.areaLabelPhase,fontSize:l.labelFontSize,color:l.labelColor,haloColor:l.labelHaloColor,haloRadius:1})))},t}();function C(t,e){return e=e.toLowerCase(),t<1e5?"".concat(t.toFixed(1)," ").concat(s.meter[e],"²"):"".concat((t/1e6).toFixed(1)," ").concat(s.kilometer[e],"²")}function L(t,e){return new mapgl.Polygon(t,{coordinates:[e],zIndex:l.areaPhase,interactive:!1,color:l.areaColor,strokeWidth:l.areaStrokeWidth})}var j=function(){function t(t){this.map=t}return t.prototype.destroy=function(){var t;null===(t=this.polyline)||void 0===t||t.destroy(),this.draggableJoint=void 0},t.prototype.getDraggableJoint=function(){return this.draggableJoint},t.prototype.setDraggableJoint=function(t){this.draggableJoint=t},t.prototype.update=function(t,e){var n,o,i;if(null===(n=this.polyline)||void 0===n||n.destroy(),this.draggableJoint){var r=e.indexOf(this.draggableJoint);if(-1===r)return;var a=[];(e[r-1]||"polygon"===t)&&a.push((null!==(o=e[r-1])&&void 0!==o?o:e[e.length-1]).getCoordinates()),a.push(this.draggableJoint.getCoordinates()),(e[r+1]||"polygon"===t)&&a.push((null!==(i=e[r+1])&&void 0!==i?i:e[0]).getCoordinates()),this.polyline=c(this.map,a,!0)}},t}(),M=function(t){function e(e){var n=t.call(this)||this;return n.map=e,n}return i(e,t),e.prototype.update=function(t,e){var n,o=this;if(null===(n=this.polyline)||void 0===n||n.destroy(),0!==e.length){var i=e.map((function(t,n){var o=t.getCoordinates(),i=0===n,r=0;i||(r=e[n-1].getDistance()+d(o,e[n-1].getCoordinates()));return t.setDistance(r,i),o}));"polygon"===t&&i.push(e[0].getCoordinates()),this.polyline=c(this.map,i,!1),this.polyline.on("mousemove",(function(t){return o.emit("mousemove",t)})),this.polyline.on("mouseout",(function(t){return o.emit("mouseout",t)})),this.polyline.on("click",(function(t){return o.emit("click",t)}))}},e.prototype.destroy=function(){var t;null===(t=this.polyline)||void 0===t||t.destroy()},e}(a),P=function(t){function e(e,n){var o,i,r,a,s,l,u,d,c=t.call(this)||this;return c.enabled=!1,c.overed=!1,c.joints=[],c.onJointMouseOver=function(t){c.overed=!0,c.previewLine.getDraggableJoint()||t.targetData.enablePopup()},c.onJointMouseOut=function(t){c.overed=!1,c.previewLine.getDraggableJoint()||t.targetData.disablePopup()},c.onJointRemoved=function(t){var e=t.targetData,n=c.joints.indexOf(e);e.isFirstJoint()&&c.joints.length>1&&c.joints[n+1].setAsFirstJoint(),c.joints.splice(n,1),c.redrawFlags.polyline=!0,c.overed=!1,c.sendRulerChangeEvent(!0)},c.onJointMoveEnd=function(){var t;c.redrawFlags.polyline=!0,c.redrawFlags.preview=!0,null===(t=c.previewLine.getDraggableJoint())||void 0===t||t.enablePopup(),c.previewLine.setDraggableJoint(void 0),c.sendRulerChangeEvent(!0)},c.onJointMove=function(){c.redrawFlags.preview=!0},c.onJointMoveStart=function(t){t.targetData.disablePopup(),c.previewLine.setDraggableJoint(t.targetData)},c.onPolylineMouseMove=function(t){c.previewLine.getDraggableJoint()||c.overed||(c.newSnapInfo=f(c.map,c.joints,t.point),c.redrawFlags.snap=!0)},c.onPolylineMouseOut=function(){c.redrawFlags.snap=!0},c.onPolylineClick=function(t){c.createSnapPoint(t.point),c.sendRulerChangeEvent(!0)},c.onClick=function(t){c.addPoint(t.lngLat,c.joints.length),c.sendRulerChangeEvent(!0)},c.map=e,c.mode=n.mode,c.language=c.map.getLanguage(),c.redrawFlags={polyline:!1,preview:!1,snap:!1},c.labelVisibilitySettings={snapPoint:null===(i=null===(o=n.labelVisibilitySettings)||void 0===o?void 0:o.snapPoint)||void 0===i||i,perimeter:null===(a=null===(r=n.labelVisibilitySettings)||void 0===r?void 0:r.perimeter)||void 0===a||a,area:null===(l=null===(s=n.labelVisibilitySettings)||void 0===s?void 0:s.area)||void 0===l||l},c.snapPoint=new b(c.map,c.labelVisibilitySettings.snapPoint),c.previewLine=new j(c.map),c.polyline=new M(c.map),c.polyline.on("mousemove",c.onPolylineMouseMove),c.polyline.on("mouseout",c.onPolylineMouseOut),c.polyline.on("click",c.onPolylineClick),null===(u=n.points)||void 0===u||u.forEach((function(t,e){return c.addPoint(t,e)})),(null===(d=n.enabled)||void 0===d||d)&&c.enable(),c}return i(e,t),e.prototype.destroy=function(){this.disable(),this.joints.forEach((function(t){return t.destroy()})),this.joints=[]},e.prototype.enable=function(){this.enabled||(this.enabled=!0,this.redrawFlags.polyline=!0,"polygon"===this.mode&&(this.polygon=new x(this.map,this.joints,this.labelVisibilitySettings.area)),this.map.on("click",this.onClick),this.joints.forEach((function(t){return t.enable()})),this.update())},e.prototype.disable=function(){var t;this.enabled&&(this.enabled=!1,this.polyline.destroy(),this.previewLine.destroy(),this.snapPoint.destroy(),null===(t=this.polygon)||void 0===t||t.destroy(),this.polygon=void 0,this.joints.forEach((function(t){return t.disable()})),this.map.off("click",this.onClick))},e.prototype.setPoints=function(t){var e=this;this.redrawFlags.polyline=!0,this.joints.forEach((function(t){return t.destroy()})),this.joints=[],t.forEach((function(t,n){return e.addPoint(t,n)})),this.sendRulerChangeEvent(!1)},e.prototype.getData=function(){var t,e;switch(this.mode){case"polyline":return{type:this.mode,coordinates:this.joints.map((function(t){return t.getCoordinates()})),lengths:this.joints.map((function(t){return t.getDistance()})),length:this.joints[this.joints.length-1].getDistance()};case"polygon":if(!this.polygon)throw new Error("no polygon but '".concat(this.mode,"' mode use."));return{type:this.mode,coordinates:[this.joints.map((function(t){return t.getCoordinates()}))],area:null!==(t=this.polygon.getArea())&&void 0!==t?t:0,perimeter:null!==(e=this.polygon.getPerimeter())&&void 0!==e?e:0,lengths:r(r([],this.joints.map((function(t){return t.getDistance()})),!0),[this.polygon.getPerimeter()],!1)};default:throw new Error("unknown mode: ".concat(this.mode))}},e.prototype.setLabelsVisibility=function(t){var e,n,o,i,r=this;this.labelVisibilitySettings={snapPoint:null===(e=t.snapPoint)||void 0===e||e,area:null===(n=t.area)||void 0===n||n,perimeter:null===(o=t.perimeter)||void 0===o||o},this.snapPoint.setLabelVisibility(this.labelVisibilitySettings.snapPoint),null===(i=this.polygon)||void 0===i||i.setLabelVisibility(this.labelVisibilitySettings.area),this.joints.forEach((function(t){return t.setLabelVisibility(r.labelVisibilitySettings.perimeter)})),this.emit("redraw")},e.prototype.addPoint=function(t,e){this.redrawFlags.polyline=!0;var n=0===this.joints.length,o=0;if(!n){var i=this.joints[e-1];o=i.getDistance()+d(i.getCoordinates(),t)}var r=new g(this.map,t,n,o,this.enabled,this.labelVisibilitySettings.perimeter);r.on("dragstart",this.onJointMoveStart),r.on("dragend",this.onJointMoveEnd),r.on("move",this.onJointMove),r.on("removed",this.onJointRemoved),r.on("mouseover",this.onJointMouseOver),r.on("mouseout",this.onJointMouseOut),this.joints.splice(e,0,r)},e.prototype.createSnapPoint=function(t){var e=f(this.map,this.joints,t);this.addPoint(e.point,e.segment+1),this.redrawFlags.snap=!0},e.prototype.sendRulerChangeEvent=function(t){this.emit("change",{data:this.getData(),isUser:t})},e.prototype.changeLanguage=function(){var t;this.language=this.map.getLanguage(),this.joints.forEach((function(t){return t.updateLabel()})),this.snapPoint.updateLabel(),null===(t=this.polygon)||void 0===t||t.updateLabel()},e.prototype.update=function(){var t,e=this;if(this.enabled){var n=this.redrawFlags.snap||this.redrawFlags.preview||this.redrawFlags.polyline;this.language!==this.map.getLanguage()&&(this.changeLanguage(),n=!0),this.redrawFlags.polyline&&(this.redrawFlags.polyline=!1,null===(t=this.polygon)||void 0===t||t.update(this.joints),this.polyline.update(this.mode,this.joints)),this.redrawFlags.preview&&(this.redrawFlags.preview=!1,this.previewLine.update(this.mode,this.joints)),this.redrawFlags.snap&&(this.redrawFlags.snap=!1,this.snapPoint.update(this.newSnapInfo),this.newSnapInfo=void 0),n&&this.emit("redraw"),requestAnimationFrame((function(){e.update()}))}},e}(a),S=n(0),I=n.n(S),E=function(t){function e(e,n){var o,i,r=t.call(this,e,"",n)||this;r.map=e,r.render=function(){r.getContainer().innerHTML="\n            <div class=".concat(I.a.root,'>\n                <button class="').concat(I.a.button).concat(r.isEnabled?" "+I.a.enabled:"",'"> ').concat(r.icon,"</button>\n            </div>\n        "),r.getContainer().querySelector(".".concat(I.a.button)).addEventListener("click",r.onClick)},r.onClick=function(){r.isEnabled?(r.ruler.destroy(),r.isEnabled=!1):(r.ruler.enable(),r.isEnabled=!0),r.render()};var a=null!==(o=n.mode)&&void 0!==o?o:"polyline";switch(r.isEnabled=null===(i=n.enabled)||void 0===i||i,a){case"polyline":r.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="currentColor">\n    <path d="M19 5.59L5.59 19 13 26.41 26.41 13zM8.41 19L10 17.41l2.29 2.3 1.42-1.42-2.3-2.29L13 14.41l2.29 2.3 1.42-1.42-2.3-2.29L16 11.41l2.29 2.3 1.42-1.42-2.3-2.29L19 8.41 23.59 13 13 23.59z" />\n</svg>\n';break;case"polygon":r.icon='<svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.7324 8C10.3866 7.4022 9.74028 7 9 7C7.89543 7 7 7.89543 7 9C7 9.74028 7.4022 10.3866 8 10.7324V20V21.2676C7.4022 21.6134 7 22.2597 7 23C7 24.1046 7.89543 25 9 25C9.74028 25 10.3866 24.5978 10.7324 24H21.2676C21.6134 24.5978 22.2597 25 23 25C24.1046 25 25 24.1046 25 23C25 22.2597 24.5978 21.6134 24 21.2676V16.7324C24.5978 16.3866 25 15.7403 25 15C25 13.8954 24.1046 13 23 13C22.8208 13 22.6472 13.0236 22.482 13.0677L18.9323 9.51804C18.9764 9.35282 19 9.17916 19 9C19 7.89543 18.1046 7 17 7C16.2597 7 15.6134 7.4022 15.2676 8H12H10.7324ZM10.7324 22H21.2676C21.4432 21.6964 21.6964 21.4432 22 21.2676V16.7324C21.4022 16.3866 21 15.7403 21 15C21 14.8208 21.0236 14.6472 21.0677 14.482L17.518 10.9323C17.3528 10.9764 17.1792 11 17 11C16.2597 11 15.6134 10.5978 15.2676 10H12H10.7324C10.5568 10.3036 10.3036 10.5568 10 10.7324V20V21.2676C10.3036 21.4432 10.5568 21.6964 10.7324 22Z"/>\n</svg>\n';break;default:throw new Error("unsupported mode: ".concat(a))}return r.ruler=new P(r.map,{enabled:r.isEnabled,mode:a}),r.render(),r}return i(e,t),e.prototype.destroy=function(){this.ruler.destroy(),t.prototype.destroy.call(this)},e.prototype.getRuler=function(){return this.ruler},e.prototype.toggle=function(){this.onClick()},e}(mapgl.Control);"undefined"!=typeof window&&("mapgl"in window?(mapgl.Ruler=P,mapgl.RulerControl=E):(window.__mapglPlugins||(window.__mapglPlugins={}),window.__mapglPlugins.Ruler=P,window.__mapglPlugins.RulerControl=E));var k=new mapgl.Map("container",{center:[55.08743147277832,24.80434400280096],zoom:16,key:"cb20c5bf-34d3-4f0e-9b2b-33e9b8edb57f"}),z=new mapgl.Control(k,'\n        <form name="toggle-form" style="display: flex; flex-direction: column;">\n        <div>\n            <input id="polyline" name="mode" type="radio" value="polyline" checked />\n            <label for="polyline">polyline</label>\n        </div>\n        <div>\n            <input id="polygon" name="mode" type="radio" value="polygon" />\n            <label for="polygon">polygon</label>\n        </div>\n        </form>\n    ',{position:"topLeft"}).getContainer().querySelector("form");z&&(z.onchange=function(t){var e=t.target.value;F.destroy(),F=new E(k,{position:"centerRight",mode:e})});var D=new mapgl.Control(k,"\n        <select>\n            <option>EN</option>\n            <option>RU</option>\n        </select>\n    ",{position:"topLeft"}).getContainer().querySelector("select");D&&(D.onchange=function(){var t;k.setLanguage(null!==(t=D[D.selectedIndex].textContent)&&void 0!==t?t:"en")});var F=new E(k,{position:"centerRight",mode:"polyline"});F.getRuler().setPoints([[55.082101821899414,24.804694608268026],[55.084805488586426,24.799708126178913],[55.09343147277832,24.80434400280096]]),window.addEventListener("resize",(function(){return k.invalidateSize()}))}]);